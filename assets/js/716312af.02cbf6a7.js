"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[96],{3752:function(t,e,n){n.r(e),n.d(e,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var i=n(7462),r=n(3366),o=(n(7294),n(3905)),a=["components"],l={id:"dp-init-link",title:"DP Inititated",description:"DP Initiated Linking flow"},s=void 0,p={unversionedId:"linking/dp-init-link",id:"linking/dp-init-link",title:"DP Inititated",description:"DP Initiated Linking flow",source:"@site/internal/specification/linking/dp-init-link.md",sourceDirName:"linking",slug:"/linking/dp-init-link",permalink:"/specification/linking/dp-init-link",editUrl:"https://github.com/iSPIRT/depa/edit/main/internal/specification/linking/dp-init-link.md",tags:[],version:"current",lastUpdatedAt:1646639910,formattedLastUpdatedAt:"3/7/2022",frontMatter:{id:"dp-init-link",title:"DP Inititated",description:"DP Initiated Linking flow"},sidebar:"specification",previous:{title:"CM Inititated",permalink:"/specification/linking/cm-init-link"},next:{title:"Consent Flow",permalink:"/specification/flows/consent-flow"}},c=[],u={toc:c};function d(t){var e=t.components,l=(0,r.Z)(t,a);return(0,o.kt)("wrapper",(0,i.Z)({},u,l,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"A user also has an option to link his CM account with the DP using DPs system."),(0,o.kt)("p",null,"It is assumed that the user has logged on to his DPs account before initiating this flow."),(0,o.kt)("p",null,"Sequence Diagram"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"accountLinking-DPSide",src:n(2048).Z,title:"accountLinking-DPSide",width:"505",height:"602"})),(0,o.kt)("p",null,"Details of the flow:-"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"User provides his CM id to the DP, this will be in the form of ",(0,o.kt)("inlineCode",{parentName:"p"},"<user-id>@<CM domain>"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"User selects the accounts which he wishes to link if maintaining multiple accounts with DP.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Mutual TLS connection established between DP and CM.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"DP sends out a request to the CM to link the accounts.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"CM asks for authorization to approve the linking request. The flow for this is not part of the specification, but conceptually this should be done in two steps")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"CM sends notification to the user about the new linking request.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Users might have to do authentication and then may or may not authorize the linking.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Post approval a success notification is sent to the DP."))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Endpoints")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"/link"))),(0,o.kt)("p",null,"Endpoint to send the linking request by the CM to the DP. This endpoint is hosted by Gateway and DP."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"/notification/link"))),(0,o.kt)("p",null,"Receive success linking notification to the linking request sent earlier. This endpoint is hosted by DP."),(0,o.kt)("p",null,"Please refer to the OpenAPI specification for details on the API and the request-response structure."),(0,o.kt)("p",null,"Account identifier: The account identifier shared by the DP as part of the linking process with CM can be completely random and hide the original account identifier."))}d.isMDXComponent=!0},2048:function(t,e,n){e.Z=n.p+"assets/images/DP-init-link-1baa16489519fd1a427c0d220abde6d6.png"},3905:function(t,e,n){n.d(e,{Zo:function(){return c},kt:function(){return f}});var i=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=i.createContext({}),p=function(t){var e=i.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):a(a({},e),t)),n},c=function(t){var e=p(t.components);return i.createElement(s.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},d=i.forwardRef((function(t,e){var n=t.components,r=t.mdxType,o=t.originalType,s=t.parentName,c=l(t,["components","mdxType","originalType","parentName"]),d=p(n),f=r,k=d["".concat(s,".").concat(f)]||d[f]||u[f]||o;return n?i.createElement(k,a(a({ref:e},c),{},{components:n})):i.createElement(k,a({ref:e},c))}));function f(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=n.length,a=new Array(o);a[0]=d;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l.mdxType="string"==typeof t?t:r,a[1]=l;for(var p=2;p<o;p++)a[p]=n[p];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);