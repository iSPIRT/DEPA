<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="search" type="application/opensearchdescription+xml" title="DEPA World" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">Consent Flow | DEPA World</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://depa.world/specification/flows/consent-flow"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-specification-current"><meta data-react-helmet="true" property="og:title" content="Consent Flow | DEPA World"><meta data-react-helmet="true" name="description" content="Description of the flow of consent in DEPA"><meta data-react-helmet="true" property="og:description" content="Description of the flow of consent in DEPA"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://depa.world/specification/flows/consent-flow"><link data-react-helmet="true" rel="alternate" href="https://depa.world/specification/flows/consent-flow" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://depa.world/specification/flows/consent-flow" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.07ead65d.css">
<link rel="preload" href="/assets/js/runtime~main.1930b79b.js" as="script">
<link rel="preload" href="/assets/js/main.65bb22be.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_VLjY"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a><a class="navbar__item navbar__link" href="/"><div class="link"><div class="link__body"><div class="link__label">Home</div></div></div></a><a class="navbar__item navbar__link" href="/learn/about-depa/an-introduction-to-depa"><div class="link"><div class="link__body"><div class="link__label">Learn</div></div></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/specification/about-spec"><div class="link"><div class="link__body"><div class="link__label">Specification</div></div></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item navbar__item--dock"><div class="toggle toggle_bWQZ toggle--disabled" role="button" tabindex="-1"><div class="toggle__icon toggle__icon--unchecked" style="font-family:Material Icons">dark_mode</div><div class="toggle__icon toggle__icon--checked" style="font-family:Material Icons">light_mode</div><input type="checkbox" class="toggle__screenreader-only" aria-label="Switch between dark and light mode"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y sidebarWithHideableNavbar_FoYL"><a tabindex="-1" class="sidebarLogo_FJUI" href="/"></a><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/about-spec">About APIs and Flows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/entity-resolution">Entity resolution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/data-provider-discovery">Data Provider Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/mtls-establishment">Mutual TLS Establishment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/specification/linking/linking-flow">Linking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/specification/flows/consent-flow">Flows</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/specification/flows/consent-flow">Consent Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/specification/flows/data-flow">Data Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/specification/flows/guardian-flow">Guardian Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/specification/flows/nominee-flow">Nominee Flow</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="theme-doc-markdown markdown"><header><h1>Consent Flow</h1></header><p>The consent flow starts with User approaching a DC to take some service, and the DC in order to provide service to the user requests some set of data. That data will be in the DPs system who is holding it in capacity of a data custodian.</p><p>Sequence Diagram</p><p><img alt="consentFlow" src="/assets/images/consent-flow-c49a9c192c8dea95c7594ac905f51e9f.png" title="consentFlow" width="729" height="942"></p><p>Details of the consent flow-</p><ol><li>DC requests for data by creating a NewConsentRequest_1.0 and pushes it to the CM of the user , for this user will have to provide his cm-id to the DC.</li><li>User selects the DPs and the accounts user holds with DP, which can fulfil the request raised by the DC. If the DP and accounts are still not linked then linking flow has to be followed first do the linking. There can be multiple requests raised by the DC and users can select the same or different DP for each of the consent requests raised.</li><li>CM can optionally check with the DP that the requested dataType is supported by it or not, this is post the user selects a DP for a consentRequest. This is to make sure we fail fast and give feedback to the user that you need to select a different DP. If this check is not made the failure will happen post consent sharing with DP.</li><li>DC can in the meantime also check for the status of the consent via a consent status API. This is optional and not required for completion of the consent flow.</li><li>Once the DPs and accounts have been selected for each consentRequest CM can take the consent from the user. This may involve doing a 2 factor authentication. A user can choose to take following actions on the consent</li></ol><p><strong>Granted</strong> - Users can choose to grant consent for a new consent-request raised by the DC. This involves the creation of the ConsentArtifact which is signed by the CM and/or signed by the User.</p><p><strong>Denied</strong> - Deny the consent request raised.</p><p><strong>Revoked</strong> - Revoke if the consent was already given. By default the consent is considered revoked after the expiry time of the consent.</p><p><strong>Paused</strong></p><p><strong>Resume</strong></p><p>This is a notification from the CM to DC and DP. In case of Denied action there is no call being made to the DP.</p><p>Whenever a user gives consent to a consent manager, allowing sharing of data from an DP to an DC, two types of consent artefacts are generated:</p><ol><li>An DC-facing artefact: This artefact is an authorization to the DC to be able to fetch information from an DP in the future. This may or may not have any “accounts” info or any information which can identify the DP.</li><li>An DP-facing artefact: This artefact is essentially a notification to an DP that communicates that “some &#x27;&#x27; DC is authorized to fetch information from it in the future. The artifact provides the “account” attribute for the DP to identify that data has to be shared from which accounts.</li></ol><p>Each consent transaction generates one DP-facing artefact and one DC-facing artefact for every pair of DP and DC across which information sharing is consented to.</p><p>A special scenario to consider - what if the DC and DP are on different networks and CM is acting as a bridge between these networks and enabling this transaction ? In this case the Consent Artifact generated by the CM can be of a different format for DC and DP. The format of these Consent Artifacts is governed by the Gateway to which the DC or DP is associated with. Since the CM is on both the Gateways it does the job of creating Network compliant Consent Artifact.</p><p><strong>Endpoints</strong></p><p><strong><em>/consent-requests</em></strong></p><p>Endpoint used by the DC to push the consent request to CM.</p><p><strong><em>/consent-requests/isSupported</em></strong></p><p>CM can use this API endpoint to check if the requested data type is supported by the DP or not.</p><p><strong><em>/consent-requests/{consentRequestsIds}</em></strong></p><p>DC can check for the status of the consent request by using this endpoint. Endpoint is hosted by CM.</p><p><strong><em>/consent</em></strong></p><p>The endpoint is hosted by DC and DP to inform about the consent lifecycle actions taken by the user. This endpoint is exposed as</p><ul><li>POST - for sending out requests like GarantedConsentRequest_1.0 or DeniedConsentRequest_1.0</li><li>PUT - used for requests like RevokeConsentRequest_1.0, PauseConsentRequest_1.0 and ResumeConsentRequest_1.0.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/iSPIRT/depa/edit/main/internal/specification/flows/consent-flow.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-03-07T09:15:54.000Z">3/7/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/specification/linking/dp-init-link"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DP Inititated</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/specification/flows/data-flow"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Flow</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer padding--none"><div class="container"><div class="row footer__links padding-vert--xl"><div class="col footer__col"><h4 class="footer__title">LEARN</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/learn/about-depa/an-introduction-to-depa">About DEPA</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/consent-artefact">Consent Artefact</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/networks/ecosystem-and-network">Networks</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/glossary">Glossary</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">SPECIFICATION</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/specification/about-spec">About APIs and Flows</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/entity-resolution">Entity Resolution</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/flows/specification/data-provider-discovery">Data Provider Disovery</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/mtls-establishment">Mutual TLS Establishment</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/linking/linking-flow">Linking</a></li><li class="footer__item"><a class="footer__link-item" href="/specification/flows/consent-flow">Flows</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/iSPIRT/DEPA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus</a></li><li class="footer__item"><a href="https://wiki.iota.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">IOTA Wiki</a></li></ul></div></div><div class="footer__bottom padding-bottom--xl"><div class="footer__copyright">2022 DEPA Global. Built with Docusaurus, using the IOTA Wiki template.</div></div></div><div class="social"></div></footer></div>
<script src="/assets/js/runtime~main.1930b79b.js"></script>
<script src="/assets/js/main.65bb22be.js"></script>
</body>
</html>